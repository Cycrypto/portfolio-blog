@tailwind base;
@tailwind components;
@tailwind utilities;

@import "katex/dist/katex.min.css";

@layer base {
  :root {
    /* ========================================
       COLOR PALETTE - 전체 사이트 색상 테마
       ======================================== */

    /* === Primary Colors (메인 브랜드 컬러 - 커스텀 블루) === */
    /* 기반 색상: #213448 (진한 네이비), #547792 (블루그레이), #94B4C1 (밝은 블루그레이) */
    --brand-blue-50: 237 242 246;     /* 매우 밝은 블루그레이 */
    --brand-blue-100: 220 232 239;    /* 밝은 블루그레이 */
    --brand-blue-200: 148 180 193;    /* #94B4C1 - 밝은 블루그레이 */
    --brand-blue-500: 84 119 146;     /* #547792 - 중간 블루그레이 */
    --brand-blue-600: 66 95 118;      /* #547792의 어두운 버전 */
    --brand-blue-700: 48 79 110;      /* #213448에 가까운 색 */
    --brand-blue-900: 33 52 72;       /* #213448 - 진한 네이비 */

    /* === Secondary Colors (보조 브랜드 컬러 - 베이지) === */
    /* 기반 색상: #EAE0CF (베이지/크림) */
    --brand-indigo-50: 245 243 240;   /* 매우 밝은 베이지 (덜 노란색) */
    --brand-indigo-500: 234 224 207;  /* #EAE0CF - 베이지 */
    --brand-indigo-600: 218 204 183;  /* 어두운 베이지 */

    /* === Neutral Colors (중성 컬러 - 슬레이트) === */
    /* 기존 블루그레이 팔레트와 조화롭게 조정 */
    --neutral-slate-50: 245 248 250;  /* 밝은 배경 */
    --neutral-slate-200: 210 220 228; /* 보더 */
    --neutral-slate-300: 180 195 208; /* 보더 */
    --neutral-slate-500: 100 120 138; /* 텍스트 */
    --neutral-slate-600: 70 90 108;   /* 텍스트 */
    --neutral-slate-700: 50 70 88;    /* 텍스트 */
    --neutral-slate-800: 40 58 75;    /* 진한 텍스트 */
    --neutral-slate-900: 33 52 72;    /* 가장 진한 텍스트 (#213448) */

    /* === Gray Colors (회색) === */
    --neutral-gray-50: 249 250 251;   /* bg-gray-50 */
    --neutral-gray-100: 243 244 246;  /* bg-gray-100 */
    --neutral-gray-200: 229 231 235;  /* border-brand-indigo-500 */
    --neutral-gray-300: 209 213 219;  /* border-brand-indigo-500 */
    --neutral-gray-500: 107 114 128;  /* text-gray-500 */
    --neutral-gray-600: 75 85 99;     /* text-gray-600 */
    --neutral-gray-700: 55 65 81;     /* text-gray-700 */
    --neutral-gray-900: 17 24 39;     /* bg-gray-900 */

    /* === Accent Colors (강조 컬러) === */
    --accent-cyan-400: 34 211 238;    /* blob animation */
    --accent-red-500: 239 68 68;      /* destructive */
    --accent-red-600: 220 38 38;      /* text-red-600 */
    --accent-green-600: 22 163 74;    /* text-green-600 */
    --accent-amber-800: 146 64 14;    /* text-amber-800 */

    /* === Semantic Colors (시맨틱 컬러) === */
    --background: 255 255 255;                      /* 흰색 배경 */
    --foreground: var(--neutral-slate-900);         /* 진한 네이비 텍스트 */
    --card: 255 255 255;
    --card-foreground: var(--neutral-slate-900);
    --popover: 255 255 255;
    --popover-foreground: var(--neutral-slate-900);
    --primary: var(--brand-blue-500);               /* 중간 블루그레이 */
    --primary-foreground: 255 255 255;              /* 흰색 텍스트 */
    --secondary: var(--brand-blue-50);              /* 밝은 블루그레이 */
    --secondary-foreground: var(--neutral-slate-900);
    --muted: var(--brand-blue-50);
    --muted-foreground: 55 65 81;
    --accent: var(--brand-blue-50);                 /* 밝은 블루그레이 */
    --accent-foreground: var(--brand-blue-900);     /* 진한 네이비 */
    --destructive: var(--accent-red-500);
    --destructive-foreground: var(--neutral-slate-50);
    --border: var(--brand-indigo-500);              /* 베이지 보더 */
    --input: var(--brand-indigo-500);
    --ring: var(--brand-indigo-600);                /* 베이지 포커스 링 */

    /* === Layout === */
    --radius: 0.5rem;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer utilities {
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  .animation-delay-4000 {
    animation-delay: 4s;
  }
}

@keyframes blob {
  0% {
    transform: translate(0px, 0px) scale(1);
  }
  33% {
    transform: translate(30px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-20px, 20px) scale(0.9);
  }
  100% {
    transform: translate(0px, 0px) scale(1);
  }
}

.animate-blob {
  animation: blob 7s infinite;
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-20px);
  }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* Tiptap Editor Styles */
.notion-shell {
  @apply w-full h-full flex flex-col;
}

.notion-fullscreen {
  @apply min-h-screen;
}

.notion-toolbar {
  @apply sticky top-0 z-10 flex items-center gap-1 px-4 py-2 bg-white border-b border-brand-indigo-500;
}

.notion-toolbar-button {
  @apply px-3 py-2 rounded-md hover:bg-gray-100 transition-colors;
}

.notion-toolbar-button[data-active="true"] {
  @apply bg-blue-100 text-blue-600;
}

.notion-color-control {
  @apply inline-flex items-center justify-center;
}

.notion-color-control input[type="color"] {
  @apply w-8 h-8 rounded cursor-pointer border-0;
}

.notion-markdown-toggle {
  @apply px-2 py-1 text-xs rounded bg-gray-100 hover:bg-gray-200 transition-colors;
}

.notion-bubble-menu {
  @apply flex items-center gap-1 bg-gray-900 rounded-lg shadow-lg p-1;
}

.notion-floating-menu {
  @apply flex items-center gap-1 bg-white border border-brand-indigo-500 rounded-lg shadow-lg p-1;
}

.notion-menu-button {
  @apply px-2 py-2 rounded hover:bg-gray-700 text-white transition-colors;
}

.notion-floating-menu .notion-menu-button {
  @apply text-gray-700 hover:bg-gray-100;
}

.notion-menu-button[data-active="true"] {
  @apply bg-gray-700 text-white;
}

.notion-floating-menu .notion-menu-button[data-active="true"] {
  @apply bg-blue-100 text-blue-600;
}

.notion-markdown-preview {
  @apply mt-4 p-4 bg-gray-50 border border-brand-indigo-500 rounded-lg;
}

.notion-markdown-preview pre {
  @apply text-xs text-gray-600 whitespace-pre-wrap;
}

/* Tiptap Content Styles */
.notion-content {
  @apply w-full;
  @apply min-h-screen;
  @apply text-black;
}

.notion-content h1 {
  @apply text-5xl font-bold mb-4 mt-8 text-black;
}

.notion-content h2 {
  @apply text-4xl font-bold mb-3 mt-6 text-black;
}

.notion-content h3 {
  @apply text-3xl font-bold mb-2 mt-4 text-black;
}

.notion-content p {
  @apply text-base leading-relaxed mb-4 text-black;
}

.notion-content ul,
.notion-content ol {
  @apply my-4 ml-8 text-black;
}

.notion-content ul {
  @apply list-disc;
}

.notion-content ol {
  @apply list-decimal;
}

.notion-content li {
  @apply mb-2 text-black;
  display: list-item;
}

.notion-content ul li::marker,
.notion-content ol li::marker {
  @apply text-black font-bold;
}

.notion-content blockquote {
  @apply border-l-4 border-brand-indigo-500 pl-4 italic my-4 text-black;
}

.notion-content code {
  @apply bg-gray-100 text-red-600 px-1.5 py-0.5 rounded text-sm font-mono;
}

.notion-content pre {
  @apply bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto my-4;
}

.notion-content pre code {
  @apply bg-transparent text-inherit p-0;
}

.notion-content a {
  @apply text-blue-600 underline hover:text-blue-800;
}

.notion-content img {
  @apply rounded-lg my-4;
}

/* Images without explicit width use max-width for responsiveness */
.notion-content img:not([width]) {
  max-width: 100%;
  height: auto;
}

.notion-content hr {
  @apply my-8 border-t-2 border-brand-indigo-500;
}

.notion-content strong {
  @apply font-bold text-black;
}

.notion-content em {
  @apply italic text-black;
}

.notion-content ul[data-type="taskList"] {
  @apply list-none ml-0;
}

.notion-content ul[data-type="taskList"] li {
  @apply flex items-start gap-2;
}

.notion-content ul[data-type="taskList"] li input[type="checkbox"] {
  @apply mt-1;
}

.notion-content table {
  @apply w-full border-collapse my-4 text-black;
}

.notion-content th,
.notion-content td {
  @apply border border-brand-indigo-500 px-4 py-2 text-black;
}

.notion-content th {
  @apply bg-gray-100 font-bold text-black;
}

/* Highlight (형광펜) styles */
.notion-content mark {
  @apply rounded px-0.5;
}

/* Placeholder styles */
.notion-content .tiptap p.is-editor-empty:first-child::before {
  @apply text-neutral-slate-800;
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

/* Custom placeholder color override */
input::placeholder,
textarea::placeholder {
  @apply text-neutral-slate-800 opacity-80;
}

/* Resizable Image Styles */
.resizable-image-wrapper {
  @apply my-4;
}

.resizable-image-wrapper .relative:hover .resize-handle {
  @apply opacity-100;
}

.resize-handle {
  @apply absolute w-3 h-3 bg-blue-500 border-2 border-white rounded-full opacity-0 transition-opacity cursor-pointer;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
}

.resize-handle:hover {
  @apply bg-blue-600;
}

.resize-handle-se {
  @apply bottom-0 right-0;
  cursor: nwse-resize;
  transform: translate(50%, 50%);
}

.resize-handle-sw {
  @apply bottom-0 left-0;
  cursor: nesw-resize;
  transform: translate(-50%, 50%);
}

.resize-handle-ne {
  @apply top-0 right-0;
  cursor: nesw-resize;
  transform: translate(50%, -50%);
}

.resize-handle-nw {
  @apply top-0 left-0;
  cursor: nwse-resize;
  transform: translate(-50%, -50%);
}

.resizing {
  @apply select-none;
}

.resizing .resize-handle {
  @apply opacity-100;
}

/* Math (KaTeX) Styles */
.notion-content .math-node {
  @apply inline-block my-2;
}

.notion-content .math-display {
  @apply block my-4 overflow-x-auto;
}

/* YouTube Embed Styles */
.notion-content .youtube-embed {
  @apply w-full my-4;
  aspect-ratio: 16 / 9;
  max-width: 100%;
  border-radius: 0.5rem;
}

/* Text Alignment */
.notion-content [style*="text-align: center"] {
  text-align: center;
}

.notion-content [style*="text-align: right"] {
  text-align: right;
}

.notion-content [style*="text-align: justify"] {
  text-align: justify;
}
