# 1. 시나리오별 입출력 명세

## S1. 블로그 목록 탐색 (`/blog`)
- API: `GET /posts`
- 입력: `page`(기본 1), `pageSize`(기본 10), `keyword`(옵션), `tags`(옵션).
- 출력: `200 { data: PostListItemDTO[], totalCount: number }`
  - `PostListItemDTO`: `id, title, excerpt, image, tags[], status, author, category, publishDate, views, comments, readTime`.
- 에러: 4xx/5xx 시 메시지 노출(프론트는 로딩/에러 UI 처리).
- 사용처: `frontend/app/blog/page.tsx`의 목록/검색/태그 필터/페이지네이션, `RelatedPosts`의 주변 글 계산.

## S2. 포스트 상세 열람 (`/blog/:id`)
- API: `GET /posts/:id`
- 입력: `id`(path param, number).
- 출력: `200 { id, title, slug?, excerpt?, content?, image?, tags[], status, author, category, publishDate, views, comments, readTime }`
- 에러: 404 시 `notFound()` 처리.
- 파생 처리: 본문을 `marked`로 HTML 변환 후 목차 생성, 공유 버튼/관련 글/삭제 버튼 렌더링.

### 댓글 조회 (상세 페이지 내부)
- API: `GET /posts/:postId/comments`
- 입력: `postId`(path param).
- 출력: `200 { success: true, data: CommentResponseDto[] }`
  - `CommentResponseDto`: `id, postId, content, authorName, authorEmail, parentId?, isDeleted, createdAt, updatedAt, replies[]`.
- 사용처: `CommentSection` 초기 로딩 및 새 댓글 등록 이후 재조회.

## S3. 댓글 작성/수정/삭제 (상세 페이지 내부)
- 작성 API: `POST /posts/:postId/comments`
  - 입력 바디: `{ postId, content, authorName, authorEmail, parentId? }` (모두 필수, `parentId`만 옵션).
  - 출력: `201 { success: true, data: CommentResponseDto }`.
- 수정 API: `PATCH /posts/:postId/comments/:commentId`
  - 입력 바디: `{ content }` (최대 1000자).
  - 출력: `200 { success: true, data: CommentResponseDto }`.
- 삭제 API: `DELETE /posts/:postId/comments/:commentId`
  - 출력: `200 { success: true, message: string }`.
- 인증: 컨트롤러에 `ApiBearerAuth` 명시되어 있으나 실제 가드는 미적용(현재 자유 호출 가능).

## S4. 관리자 포스트 관리 (`/admin/posts` 이하)
- 목록: `GET /posts` (동일 응답을 사용해 테이블 렌더링).
- 생성: `POST /posts`
  - 입력 바디: `{ title, slug?, excerpt?, content?, image?, tags?, status, author, category, publishDate(ISO), readTime? }`.
  - 출력: `201 PostResponseDTO`(단일 포스트 객체).
- 수정: `PATCH /posts/:id`
  - 입력 바디: 변경 필드만 포함하는 DTO(`UpdatePostRequestDTO`와 동일 스키마, 선택 필드 모두 optional).
  - 출력: `200 PostResponseDTO`(현재 구현상 태그 미반환 가능성 있음).
- 삭제: `DELETE /posts/:id` → `{ message: string }`.
- 인증: `JwtRoleGuard` + `@Roles('admin')` 적용. 개발용 토큰 발급 엔드포인트 `POST /dev-token` 존재.
